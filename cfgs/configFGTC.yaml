# config_floating_grid.yaml

environment:
  dt_min: 1.0e-10

garch:
  alpha: 2.308475e-06
  beta: 0.689984
  gamma: 342.870019
  h0: 5.14e-07
  lambda: 0.420499
  omega: 1.593749e-07
  sigma0: 0.127037

hedged_option:
  K: 100
  T: 1.0
  option_type: put
  side: short
  type: vanilla

instruments:
  mode: "floating_grid"  # or "static" for backward compatibility
  n_hedging_instruments: 43  # 1 stock + 30 options (5 moneyness Ã— 6 maturities)
  
  floating_grid:
    enabled: true
    moneyness_levels: [0.8, 0.9, 0.95, 1.0, 1.05, 1.1, 1.2]  # 7 levels
    maturity_days: [30, 60, 90, 120, 180, 252]  # 6 maturities
    option_type: "put"
    sparsity_penalty: 0.001
    min_trade_size: 0.5

logging:
  level: INFO
  log_file: null

model:
  hidden_size: 128
  lstm_layers: 1
  num_layers: 1
  obs_dim: 5  # Changed from 5 to 9 for floating grid

output:
  checkpoint_path: policy_net_floating_grid.pth
  model_save_path: policy_net_floating_grid.pth
  plot_dpi: 150
  plot_save_path: hedge_comparison_floating_ep{episode}.png
  sample_path_index: 1

precomputation:
  N_quad: 256
  device: cpu
  u_max: 500.0

simulation:
  M: 1000
  N: 252
  S0: 100
  T: 1.0
  contract_size: 1
  r: 0.04

training:
  batch_size: 1000
  checkpoint_frequency: 25
  device: cuda
  entropy_coefficient: 0.5
  episodes: 300
  gamma: 0.9999
  gradient_clip_max_norm: 1.0
  learning_rate: 0.0001
  num_epochs: 400
  optimizer: AdamW
  plot_frequency: 100
  seed: 78020349
  weight_decay: 1.0e-05

transaction_costs:
  TC: true

risk_measure:
  type: mse  # or 'smse', 'cvar', 'var', 'mae'
  # alpha: 0.95  # Only needed for cvar/var

soft_constraint:
  enabled: false
  lambda: 0.0
